@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Base colors */
    --white: 100% 0 0;
    --black: 18.67% 0 0;
    --black-800: 26% 0 0;
    --black-950: 16.84% 0 0;

    /* Primary (Purple brand) - refined violet spectrum */
    --primary-50: 95% 0.03 280;
    --primary-100: 90% 0.06 280;
    --primary-200: 82% 0.12 280;
    --primary-300: 72% 0.16 280;
    --primary-400: 65% 0.2 280;
    --primary-500: 58% 0.22 280;
    --primary-600: 52% 0.2 280;
    --primary-650: 48% 0.22 280;
    --primary-700: 42% 0.18 280;
    --primary-800: 35% 0.14 280;
    --primary-900: 28% 0.1 280;

    /* Accent (Warm coral for contrast) */
    --accent-400: 72% 0.18 25;
    --accent-500: 65% 0.2 25;
    --accent-600: 58% 0.18 25;

    /* Gray scale - warmer undertones */
    --gray-50: 98.5% 0.002 280;
    --gray-100: 96.5% 0.004 280;
    --gray-200: 93% 0.008 280;
    --gray-300: 87% 0.012 280;
    --gray-400: 70% 0.02 280;
    --gray-450: 60% 0.015 280;
    --gray-500: 53% 0.02 280;
    --gray-600: 42% 0.02 280;
    --gray-700: 32% 0.015 280;
    --gray-800: 24% 0.01 280;
    --gray-900: 18% 0.008 280;
    --gray-950: 12% 0.006 280;

    /* Surface colors */
    --clr-surface-100: var(--gray-100);
    --clr-surface-200: var(--gray-50);
    --clr-surface-300: var(--white);
    --clr-surface-400: var(--gray-200);

    /* Semantic colors */
    --red-500: 59.16% 0.218 0.58;
    --green-500: 78.02% 0.1534 168.27;
    --green-600: 64.33% 0.1128 171.09;
    --yellow-500: 80.13% 0.1458 73.41;
    --blue-500: 82.1% 0.099263 240.9782;
    --blue-600: 64.12% 0.0638 240.72;

    /* Shadows - enhanced depth system */
    --shadow-xs: 0px 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-sm: 0px 2px 4px rgba(0, 0, 0, 0.06), 0px 4px 6px rgba(0, 0, 0, 0.04);
    --shadow-md: 0px 4px 8px rgba(0, 0, 0, 0.06), 0px 8px 16px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0px 8px 16px rgba(0, 0, 0, 0.08), 0px 16px 32px rgba(0, 0, 0, 0.06);
    --shadow-xl: 0px 16px 32px rgba(0, 0, 0, 0.1), 0px 24px 48px rgba(0, 0, 0, 0.08);
    --shadow-glow: 0px 0px 24px rgba(139, 92, 246, 0.15);
    --shadow-glow-strong: 0px 0px 40px rgba(139, 92, 246, 0.25);

    /* Glassmorphism */
    --glass-bg: rgba(255, 255, 255, 0.7);
    --glass-border: rgba(255, 255, 255, 0.4);
    --glass-blur: 16px;

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, oklch(var(--primary-500)), oklch(var(--primary-600)));
    --gradient-primary-vivid: linear-gradient(135deg, oklch(var(--primary-400)), oklch(var(--primary-650)));
    --gradient-surface: linear-gradient(180deg, oklch(var(--gray-50)), oklch(var(--gray-100)));
    --gradient-shimmer: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.4) 50%, transparent 100%);

    /* Transitions */
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);
    --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
  }

  /* Dark mode support */
  html.dark {
    color-scheme: dark;
    --clr-surface-100: var(--gray-950);
    --clr-surface-200: var(--gray-900);
    --clr-surface-300: var(--gray-900);
    --clr-surface-400: var(--gray-800);

    /* Dark mode shadows */
    --shadow-xs: 0px 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-sm: 0px 2px 4px rgba(0, 0, 0, 0.2), 0px 4px 6px rgba(0, 0, 0, 0.15);
    --shadow-md: 0px 4px 8px rgba(0, 0, 0, 0.25), 0px 8px 16px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0px 8px 16px rgba(0, 0, 0, 0.3), 0px 16px 32px rgba(0, 0, 0, 0.25);
    --shadow-xl: 0px 16px 32px rgba(0, 0, 0, 0.35), 0px 24px 48px rgba(0, 0, 0, 0.3);
    --shadow-glow: 0px 0px 32px rgba(139, 92, 246, 0.2);
    --shadow-glow-strong: 0px 0px 48px rgba(139, 92, 246, 0.35);

    /* Dark glassmorphism */
    --glass-bg: rgba(24, 24, 32, 0.75);
    --glass-border: rgba(255, 255, 255, 0.08);
  }

  /* Base body styles */
  body {
    font-family: 'Gilroy', system-ui, -apple-system, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: oklch(var(--gray-50));
  }

  html.dark body {
    background: oklch(var(--gray-950));
  }
}

@layer components {
  /* Glassmorphism card */
  .glass {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--glass-border);
  }

  /* Premium input container */
  .input-premium {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid oklch(var(--gray-200));
    box-shadow: var(--shadow-md), inset 0 1px 0 rgba(255,255,255,0.5);
    transition: all 0.3s var(--ease-smooth);
  }

  .input-premium:focus-within {
    border-color: oklch(var(--primary-400) / 0.5);
    box-shadow: var(--shadow-lg), var(--shadow-glow), inset 0 1px 0 rgba(255,255,255,0.5);
  }

  html.dark .input-premium {
    border-color: oklch(var(--gray-700));
    box-shadow: var(--shadow-md), inset 0 1px 0 rgba(255,255,255,0.05);
  }

  html.dark .input-premium:focus-within {
    border-color: oklch(var(--primary-500) / 0.4);
    box-shadow: var(--shadow-lg), var(--shadow-glow), inset 0 1px 0 rgba(255,255,255,0.05);
  }

  /* Premium button */
  .btn-primary {
    background: var(--gradient-primary-vivid);
    color: white;
    font-weight: 500;
    border: none;
    box-shadow: var(--shadow-sm), 0 1px 0 rgba(255,255,255,0.15) inset;
    transition: all 0.2s var(--ease-spring);
  }

  .btn-primary:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md), var(--shadow-glow);
  }

  .btn-primary:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--shadow-xs);
  }

  /* Message bubbles */
  .bubble-user {
    background: var(--gradient-primary-vivid);
    color: white;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
  }

  .bubble-user::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(180deg, rgba(255,255,255,0.12) 0%, transparent 100%);
    pointer-events: none;
  }

  .bubble-assistant {
    background: oklch(var(--white));
    border: 1px solid oklch(var(--gray-200));
    box-shadow: var(--shadow-sm);
  }

  html.dark .bubble-assistant {
    background: oklch(var(--gray-800));
    border-color: oklch(var(--gray-700));
  }

  /* Card with subtle gradient */
  .card-elevated {
    background: oklch(var(--white));
    border: 1px solid oklch(var(--gray-200));
    box-shadow: var(--shadow-md);
    transition: all 0.3s var(--ease-smooth);
  }

  .card-elevated:hover {
    border-color: oklch(var(--primary-400) / 0.3);
    box-shadow: var(--shadow-lg), var(--shadow-glow);
    transform: translateY(-2px);
  }

  html.dark .card-elevated {
    background: oklch(var(--gray-800) / 0.6);
    border-color: oklch(var(--gray-700));
  }

  html.dark .card-elevated:hover {
    border-color: oklch(var(--primary-500) / 0.3);
  }

  /* Avatar with gradient */
  .avatar-primary {
    background: var(--gradient-primary-vivid);
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
  }

  .avatar-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(180deg, rgba(255,255,255,0.2) 0%, transparent 100%);
    pointer-events: none;
  }

  /* Gradient text */
  .text-gradient {
    background: var(--gradient-primary-vivid);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Sidebar styling */
  .sidebar {
    background: linear-gradient(180deg, oklch(var(--white)) 0%, oklch(var(--gray-50)) 100%);
    border-right: 1px solid oklch(var(--gray-200));
  }

  html.dark .sidebar {
    background: linear-gradient(180deg, oklch(var(--gray-900)) 0%, oklch(var(--gray-950)) 100%);
    border-right-color: oklch(var(--gray-800));
  }
}

@layer utilities {
  /* Smooth transitions */
  .transition-smooth {
    transition: all 200ms var(--ease-smooth);
  }

  .transition-spring {
    transition: all 300ms var(--ease-spring);
  }

  /* Hide scrollbar utility */
  .hide-scrollbar {
    scrollbar-width: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Custom scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: oklch(var(--gray-300)) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: oklch(var(--gray-300));
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: oklch(var(--gray-400));
  }

  html.dark .scrollbar-thin {
    scrollbar-color: oklch(var(--gray-700)) transparent;
  }

  html.dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background: oklch(var(--gray-700));
  }

  html.dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: oklch(var(--gray-600));
  }

  /* Hide browser default search input clear button */
  input[type="search"]::-webkit-search-cancel-button {
    display: none;
  }

  /* Hide browser default search decoration */
  input[type="search"]::-webkit-search-decoration {
    display: none;
  }

  /* Remove webkit appearance for search inputs */
  input[type="search"] {
    -webkit-appearance: none;
    appearance: none;
  }

  /* Prevent webkit autofill styling */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  textarea:-webkit-autofill:hover,
  textarea:-webkit-autofill:focus {
    -webkit-box-shadow: 0 0 0 1000px transparent inset !important;
    -webkit-text-fill-color: inherit;
  }

  /* Touch utilities */
  .touch-tap {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-user-select: none;
    user-select: none;
  }

  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }

  /* Noise texture overlay */
  .noise-overlay {
    position: relative;
  }

  .noise-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  html.dark .noise-overlay::after {
    opacity: 0.05;
  }

  /* Shimmer animation */
  .shimmer {
    position: relative;
    overflow: hidden;
  }

  .shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--gradient-shimmer);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  /* Pulse glow animation */
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: var(--shadow-md), 0 0 20px rgba(139, 92, 246, 0.15);
    }
    50% {
      box-shadow: var(--shadow-md), 0 0 30px rgba(139, 92, 246, 0.25);
    }
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Float animation */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }
}
