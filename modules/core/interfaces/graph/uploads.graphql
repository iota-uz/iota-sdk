scalar File

enum UploadType
  @goModel(
    model: "github.com/iota-uz/iota-sdk/modules/core/domain/entities/upload.UploadType"
  ) {
  Document
    @goEnum(
      value: "github.com/iota-uz/iota-sdk/modules/core/domain/entities/upload.UploadTypeDocument"
    )
  Image
    @goEnum(
      value: "github.com/iota-uz/iota-sdk/modules/core/domain/entities/upload.UploadTypeImage"
    )
}

enum UploadSortField {
  SIZE
  NAME
  CREATED_AT
  UPDATED_AT
}

input UploadSort {
  field: UploadSortField!
  ascending: Boolean!
}

type GeoPoint {
  lat: Float!
  lng: Float!
}

type Upload {
  id: ID!
  url: String!
  hash: String!
  path: String!
  name: String!
  slug: String!
  mimetype: String!
  type: UploadType!
  geoPoint: GeoPoint!
  size: Int!
}

input UploadFilter {
  mimeType: String
  mimeTypePrefix: String
  type: UploadType
  sort: UploadSort
}

input GeoPointInput {
  lat: Float!
  lng: Float!
}

input UploadFileOpts {
  geoPoint: GeoPointInput
}

extend type Mutation {
  uploadFile(file: File, opts: UploadFileOpts): Upload!
  uploadFileWithSlug(file: File, slug: String!, opts: UploadFileOpts): Upload!
  deleteUpload(id: ID!): Boolean!
}

extend type Query {
  uploads(filter: UploadFilter!): [Upload!]!
}
